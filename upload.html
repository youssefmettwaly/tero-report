<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>TERO</title>
<style>
  body{background:#000;color:#0f0;font-family:Arial;text-align:center;padding:150px;}
  h1{color:#e74c3c;font-size:70px;}
  #msg{font-size:32px;margin:40px;}
</style>
</head><body>
<h1>tero</h1>
<div id="msg">جاري الرفع تلقائي...</div>

<script>
const t1="github_pat_11A3ZKARI0";
const t2="Q8CbII0GvNSt_";
const t3="hv6TMKWiNaMucDwhvOE4tNh9aBtjIB7VkTMj7xnjra";
const t4="276EGSZZQGRkTKn8W";
const TOKEN = t1+t2+t3+t4;

const API = "https://api.github.com/repos/youssefmettwaly/tero-report/contents/reports";

if (location.hash.length > 10) {
  try {
    const b64 = decodeURIComponent(location.hash.substring(1));
    const bin = atob(b64);
    const arr = Uint8Array.from(bin, c => c.charCodeAt(0));
    const text = new TextDecoder().decode(pako.inflate(arr));

    const fn = "report_"+Date.now()+".txt";
    const content = btoa(unescape(encodeURIComponent(text)));

    fetch(API+"/"+fn, {
      method:"PUT",
      headers:{
        "Authorization":"token "+TOKEN,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({message:"report",content:content,branch:"main"})
    })
    .then(() => {
      document.getElementById("msg").innerHTML = "<h1 style='color:#0f0'>تم تحميل الملف بنجاح ✓</h1>";
      setTimeout(() => { location.href = "https://youssefmettwaly.github.io/tero-report/index.html"; }, 2000);
    })
    .catch(() => { document.getElementById("msg").innerHTML = "فشل الرفع"; });
  } catch(e) {
    document.getElementById("msg").innerHTML = "خطأ في البيانات";
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
</body></html>
